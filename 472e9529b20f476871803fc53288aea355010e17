{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9f687e36_e9ea4171",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017725
      },
      "writtenOn": "2022-12-10T20:38:29Z",
      "side": 1,
      "message": "recheck infrared-pipeline",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32df7402_32883ffd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017725
      },
      "writtenOn": "2022-12-10T23:57:35Z",
      "side": 1,
      "message": "recheck",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5a47aab_9e24cc02",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017725
      },
      "writtenOn": "2022-12-12T13:21:34Z",
      "side": 1,
      "message": "Controller replacement job passes when using these diffs:  https://rhos-ci-staging-jenkins.lab.eng.tlv2.redhat.com/view/DFG/view/df/view/controller_replacement/job/DFG-df-controller_replacement-17.0-virthost-3cont_3comp_3ceph-yes_UC_SSL-yes_OC_SSL-ceph-ipv4-geneve-replace_controller-RHELOSP-31864/47/",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb62955b_f15d84db",
        "filename": "post_tasks/roles/add-node/tasks/normal_flow.yml",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-12-12T15:10:26Z",
      "side": 1,
      "message": "Please note that infrared is now branched, so the code can support natively the new behavior. master currently targets OSP17.1 and OSP17 is for 17.0.",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c979e06c_29ab0e9b",
        "filename": "post_tasks/roles/add-node/tasks/normal_flow.yml",
        "patchSetId": 1
      },
      "lineNbr": 255,
      "author": {
        "id": 1016110
      },
      "writtenOn": "2022-12-12T15:10:26Z",
      "side": 1,
      "message": "Please note there is more than just composable_roles or virt as options.\n\nThere is --deployment-files, see how it is used in plugins/tripleo-overcloud/build_templates.yml for example\n\n  vars:\n      source_dir: \"{{ install.deployment.files }}\"\n      [...]\n      template_base: \"{{ ansible_user_dir }}/{{ source_dir | basename }}\"",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24197b63_5458a3d2",
        "filename": "post_tasks/roles/add-node/tasks/normal_flow.yml",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1015563
      },
      "writtenOn": "2022-12-12T14:14:38Z",
      "side": 1,
      "message": "Should there not a an `openstack overcloud deploy` step here?",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65071364_5108e4d6",
        "filename": "post_tasks/roles/add-node/tasks/normal_flow.yml",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1017725
      },
      "writtenOn": "2022-12-12T14:41:03Z",
      "side": 1,
      "message": "The plugin\u0027s existing overcloud deploy command is used which happens a few steps later than the comment. After normal_flow.yml completes the job executes replace_node.yml where the overcloud deploy is executed here: https://review.gerrithub.io/c/rhos-infra/cloud-config/+/547322/1/post_tasks/roles/replace-controller/tasks/replace_node.yml#80",
      "parentUuid": "24197b63_5458a3d2",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "70ab2e17_4d339c0b",
        "filename": "post_tasks/roles/add-node/tasks/normal_flow.yml",
        "patchSetId": 1
      },
      "lineNbr": 338,
      "author": {
        "id": 1015563
      },
      "writtenOn": "2022-12-12T14:50:03Z",
      "side": 1,
      "message": "Ack, thanks for explaining.",
      "parentUuid": "65071364_5108e4d6",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95954291_bc5fad3b",
        "filename": "post_tasks/roles/replace-controller/tasks/remove_ceph_monitor.yml",
        "patchSetId": 1
      },
      "lineNbr": 160,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-12-12T15:31:08Z",
      "side": 1,
      "message": "I think this line with `ceph orch host drain` is the only one necessary for this task. I don\u0027t expect the keyring or conf to change as a result of the drain so I don\u0027t think we need the extra cp\u0027s and rm\u0027s.\n\nThe ceph.conf for the ceph server becomes centralized in a DB under cephadm management and the \u0027ceph config\u0027 is authoritative (not ceph.conf). \n\n  https://docs.ceph.com/en/latest/man/8/ceph/#config\n\nceph.conf itself is used my ceph clients (nova) but if the IP if the mon to be replaced stays the same, then they don\u0027t need a new copy. The client ceph.conf is in a diff path defined by:\n\nhttps://github.com/openstack/tripleo-heat-templates/blob/stable/wallaby/deployment/cephadm/ceph-client.yaml#L61",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed0fb039_f881b763",
        "filename": "post_tasks/roles/replace-controller/tasks/remove_ceph_monitor.yml",
        "patchSetId": 1
      },
      "lineNbr": 160,
      "author": {
        "id": 1017725
      },
      "writtenOn": "2022-12-12T15:47:28Z",
      "side": 1,
      "message": "I had a lot of trouble with this step. When doing the procedure manually I went into cephadm shell and then executed the host drain command. Worked with no problem. When doing the automation it was all one step i.e. automation executes the command: cephadm shell ceph orch host drain. After that command is executed all ceph commands failed with error: ObjectNotFound(\u0027RADOS object not found. After looking at it for a long time I saw the /etc/ceph/ceph.conf and /etc/ceph/ceph.client.admin.keyring were being deleted. After that I saved them, let them be deleted, and then replaced them. The automation worked after that. If you know of a way to do the ceph drain without it deleting those files then I would do it. I could not find a way.",
      "parentUuid": "95954291_bc5fad3b",
      "revId": "472e9529b20f476871803fc53288aea355010e17",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}